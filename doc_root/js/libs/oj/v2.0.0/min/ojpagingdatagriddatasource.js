/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojpagingtabledatasource"],function(b){b.xe=function(b,a){this.qr=b;this.zm=a};o_("PagingHeaderSet",b.xe,b);b.xe.prototype.getData=function(b,a){return this.qr.getData(b+this.zm,a)};b.b.g("PagingHeaderSet.prototype.getData",{getData:b.xe.prototype.getData});b.xe.prototype.getMetadata=function(b,a){return this.qr.getMetadata(b+this.zm,a)};b.b.g("PagingHeaderSet.prototype.getMetadata",{getMetadata:b.xe.prototype.getMetadata});b.xe.prototype.R=function(){return this.qr.R()};
b.b.g("PagingHeaderSet.prototype.getCount",{R:b.xe.prototype.R});b.xe.prototype.wg=function(){return this.qr.wg()};b.b.g("PagingHeaderSet.prototype.getLevelCount",{wg:b.xe.prototype.wg});b.xe.prototype.Ub=function(b,a){return this.qr.Ub(b+this.zm,a)};b.b.g("PagingHeaderSet.prototype.getExtent",{Ub:b.xe.prototype.Ub});b.xe.prototype.le=function(b,a){return this.qr.le(b+this.zm,a)};b.b.g("PagingHeaderSet.prototype.getDepth",{le:b.xe.prototype.le});b.xe.prototype.U2=function(){return this.qr};b.b.g("PagingHeaderSet.prototype.getHeaderSet",
{U2:b.xe.prototype.U2});b.xe.prototype.Fy=function(){return this.zm};b.b.g("PagingHeaderSet.prototype.getStartIndex",{Fy:b.xe.prototype.Fy});b.Ka=function(f){if(!(f instanceof b.Um))throw new b.X("Not a datagridatasource","Not a datagridatasource",b.X.Sb.ERROR);this.uc=f;this.$=0;this.Init()};o_("PagingDataGridDataSource",b.Ka,b);b.b.ga(b.Ka,b.Um,"oj.PagingDataGridDataSource");b.Ka.prototype.Init=function(){b.Ka.q.Init.call(this);this.Kx()};b.b.g("PagingDataGridDataSource.prototype.Init",{Init:b.Ka.prototype.Init});
b.Ka.prototype.Kx=function(){this.uc.on("change",this.Mea.bind(this))};b.Ka.prototype.getPage=function(){return this.Mc};b.b.g("PagingDataGridDataSource.prototype.getPage",{getPage:b.Ka.prototype.getPage});b.Ka.prototype.setPage=function(f,a){a=a||{};f=parseInt(f,10);try{b.Ka.q.handleEvent.call(this,b.ac.D.BEFOREPAGE,{page:f,previousPage:this.Mc})}catch(d){return Promise.reject(null)}this.La=null!=a.pageSize?a.pageSize:this.La;a.startIndex=f*this.La;var c=this.Mc;this.Mc=f;this.$=a.startIndex;var e=
this;return new Promise(function(b,d){e.De(a).then(function(){b(null)},function(){e.Mc=c;e.$=e.Mc*e.La;d(null)})})};b.b.g("PagingDataGridDataSource.prototype.setPage",{setPage:b.Ka.prototype.setPage});b.Ka.prototype.De=function(b){this.Rl=!0;this.$=b.startIndex;var a=this;return new Promise(function(b){a.handleEvent("change",{operation:"sync",pageSize:a.La});b(void 0)})};b.Ka.prototype.fetch=function(b){this.La=b.pageSize+b.startIndex;b.startIndex=0;return this.De(b)};b.b.g("PagingDataGridDataSource.prototype.fetch",
{fetch:b.Ka.prototype.fetch});b.Ka.prototype.getStartItemIndex=function(){return this.$};b.b.g("PagingDataGridDataSource.prototype.getStartItemIndex",{getStartItemIndex:b.Ka.prototype.getStartItemIndex});b.Ka.prototype.getEndItemIndex=function(){return this.jj};b.b.g("PagingDataGridDataSource.prototype.getEndItemIndex",{getEndItemIndex:b.Ka.prototype.getEndItemIndex});b.Ka.prototype.getPageCount=function(){var b=this.totalSize();return-1==b?-1:Math.ceil(b/this.La)};b.b.g("PagingDataGridDataSource.prototype.getPageCount",
{getPageCount:b.Ka.prototype.getPageCount});b.Ka.prototype.Mea=function(f){switch(f.operation){case "refresh":this.$=0;this.handleEvent("change",{operation:"sync",pageSize:this.La});this.handleEvent(b.ka.D.REFRESH,null);break;case "reset":this.handleEvent(b.ka.D.RESET,null);break;case "insert":this.handleEvent(b.ka.D.ADD,{index:f.indexes.row});break;case "delete":this.handleEvent(b.ka.D.REMOVE,null);break;case "update":f.indexes.row=0<=f.indexes.row-this.$?f.indexes.row-this.$:-1;this.handleEvent("change",
f);break;default:this.handleEvent("change",f),this.handleEvent(b.ka.D.SYNC,null)}};b.Ka.prototype.R=function(b){var a=this.uc.R(b);return"row"===b&&0<=a?this.$+this.La<a?this.La:a-this.$:a};b.b.g("PagingDataGridDataSource.prototype.getCount",{R:b.Ka.prototype.R});b.Ka.prototype.ug=function(b){return this.uc.ug(b)};b.b.g("PagingDataGridDataSource.prototype.getCountPrecision",{ug:b.Ka.prototype.ug});b.Ka.prototype.If=function(f,a,d){var c;null==this.Rl?(c=new b.Fd(0,0,f.axis,null),null!=a&&a.success&&
a.success.call(d.success,c,f)):"row"===f.axis?(f.start+=this.$,f.start+f.count>this.$+this.La&&(f.count=this.La-f.start),this.St={callbacks:a,callbackObjects:d},this.uc.If(f,{success:this.VJ.bind(this),error:this.Nfa.bind(this)},d)):this.uc.If(f,a,d)};b.b.g("PagingDataGridDataSource.prototype.fetchHeaders",{If:b.Ka.prototype.If});b.Ka.prototype.VJ=function(f,a){var d,c,e;a.start-=this.$;a.count+=1;d=new b.xe(f,this.$);c=this.St.callbacks.success;e=this.St.callbackObjects.success;this.St=null;c.call(e,
d,a)};b.Ka.prototype.Nfa=function(b){var a,d;a=this.St.callbacks.error;d=this.St.callbackObjects.error;this.St=null;a.call(d,b)};b.Ka.prototype.tg=function(f,a,d){var c;if(null==this.Rl)c=new b.Tf(0,0,0,0,null),null!=a&&a.success&&a.success.call(d.success,c,f);else{for(c=0;c<f.length;c+=1)"row"===f[c].axis&&(f[c].start+=this.$,f[c].start+f[c].count>this.$+this.La&&(f[c].count=this.La-f[c].start));this.Qt={callbacks:a,callbackObjects:d};this.uc.tg(f,{success:this.Lea.bind(this),error:this.Kea.bind(this)},
d)}};b.b.g("PagingDataGridDataSource.prototype.fetchCells",{tg:b.Ka.prototype.tg});b.Ka.prototype.Lea=function(f,a){var d,c,e;for(d=0;d<a.length;d+=1)"row"===a[d].axis&&(a[d].start-=this.$,a[d].count+=1);d=new b.ai(f,this.$);c=this.Qt.callbacks.success;e=this.Qt.callbackObjects.success;this.Qt=null;this.jj=this.$+f.R("row")-1;this.handleEvent("sync",{data:Array(f.R("row")),startIndex:this.$});c.call(e,d,a)};b.Ka.prototype.Kea=function(b){var a,d;a=this.Qt.callbacks.error;d=this.Qt.callbackObjects.error;
this.Qt=null;a.call(d,b)};b.Ka.prototype.keys=function(b){return this.uc.keys({column:b.column,row:b.row+this.$})};b.b.g("PagingDataGridDataSource.prototype.keys",{keys:b.Ka.prototype.keys});b.Ka.prototype.zg=function(b){b=this.uc.zg(b);-1!=b.row&&(b.row-=this.$);return b};b.b.g("PagingDataGridDataSource.prototype.indexes",{zg:b.Ka.prototype.zg});b.Ka.prototype.getCapability=function(b){return this.uc.getCapability(b)};b.b.g("PagingDataGridDataSource.prototype.getCapability",{getCapability:b.Ka.prototype.getCapability});
b.Ka.prototype.size=function(){var b;if(null==this.Rl)return-1;b=this.uc.R("row");return this.uc.R("row")>this.La?this.La:b};b.b.g("PagingDataGridDataSource.prototype.size",{size:b.Ka.prototype.size});b.Ka.prototype.sort=function(b,a,d){this.uc.sort(b,a,d)};b.b.g("PagingDataGridDataSource.prototype.sort",{sort:b.Ka.prototype.sort});b.Ka.prototype.totalSize=function(){return null==this.Rl?-1:this.uc.R("row")};b.b.g("PagingDataGridDataSource.prototype.totalSize",{totalSize:b.Ka.prototype.totalSize});
b.Ka.prototype.totalSizeConfidence=function(){return"actual"};b.b.g("PagingDataGridDataSource.prototype.totalSizeConfidence",{totalSizeConfidence:b.Ka.prototype.totalSizeConfidence});b.Ka.prototype.od=function(b,a,d){return this.uc.od(b,a,d)};b.b.g("PagingDataGridDataSource.prototype.moveOK",{od:b.Ka.prototype.od});b.Ka.prototype.move=function(b,a,d,c,e){this.uc.move(b,a,d,c,e)};b.b.g("PagingDataGridDataSource.prototype.move",{move:b.Ka.prototype.move});b.ai=function(b,a){this.sE=b;this.zm=a};o_("PagingCellSet",
b.ai,b);b.ai.prototype.getData=function(b){return this.sE.getData({column:b.column,row:b.row+this.zm})};b.b.g("PagingCellSet.prototype.getData",{getData:b.ai.prototype.getData});b.ai.prototype.getMetadata=function(b){return this.sE.getMetadata({column:b.column,row:b.row+this.zm})};b.b.g("PagingCellSet.prototype.getMetadata",{getMetadata:b.ai.prototype.getMetadata});b.ai.prototype.R=function(b){return this.sE.R(b)};b.b.g("PagingCellSet.prototype.getCount",{R:b.ai.prototype.R});b.ai.prototype.F2=function(){return this.sE};
b.b.g("PagingCellSet.prototype.getCellSet",{F2:b.ai.prototype.F2});b.ai.prototype.Fy=function(){return this.zm};b.b.g("PagingCellSet.prototype.getStartIndex",{Fy:b.ai.prototype.Fy})});