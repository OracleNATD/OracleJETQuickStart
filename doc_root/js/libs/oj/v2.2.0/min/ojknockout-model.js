/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","knockout","ojs/ojmodel"],function(a,g){a.lb=function(){};o_("KnockoutUtils",a.lb,a);a.lb.YY="oj._internalObj";a.lb.uk="oj._underUpdate";a.lb.$z="oj.collectionUpdating";a.lb.t_="oj.collectionSubscription";a.lb.B_="oj.collectionUpdatingFunc";a.lb.map=function(b,c,d){function e(c){return function(d){f[a.lb.uk]||b.set(c,d)}}var f,h,k,l;if(b instanceof a.l){h=Array(b.sf());f=d?g.observableArray(h):h;a.lb.uda(f,b);if(d)for(h=0;h<b.ed.length;h++)k=b.ed[h],f()[k]=a.lb.map(b.nq(k,null,
!0,!1),c);else for(h=0;h<b.ed.length;h++)k=b.ed[h],f[k]=a.lb.map(b.nq(k,null,!0,!1),c);h=function(c){var d;try{if(!f[a.lb.uk]){f[a.lb.$z]=!0;for(d=0;d<c.length;d++){var e=c[d].index,g=a.lb.Tc(c[d].value),h=c[d].status;"added"===h?e>=b.length-1?b.add(g):b.add(g,{at:e}):"deleted"===h&&b.hw(g,e)}b.comparator&&(f[a.lb.uk]=!0,f.sort(function(c,d){return a.lb.G4(c,d,b.comparator,b,this)}),f[a.lb.uk]=!1)}}catch(k){throw k;}finally{f[a.lb.$z]=!1}};d&&f.subscribe&&(f[a.lb.B_]=h,f[a.lb.t_]=f.subscribe(h,null,
"arrayChange"));d=function(b,c,d){var e;try{!f[a.lb.$z]&&c instanceof a.l&&(f[a.lb.uk]=!0,e=d.index,f.splice(e,1))}catch(g){throw g;}finally{f[a.lb.uk]=!1}};h=function(b,d,e){var g,h;try{if(!f[a.lb.$z]&&d instanceof a.l&&(f[a.lb.uk]=!0,g=d.Cza(b),void 0!==g&&-1<g))if(h=a.lb.map(b,c),e.fillIn){for(var k=Array.isArray(f)?f.length:f().length;k<g;k++)f.splice(k,0,a.lb.map(d.nq(k,null,!0,!1),c));f.splice(g,1,h)}else f.splice(g,0,h)}catch(l){throw l;}finally{f[a.lb.uk]=!1}};k=function(b){try{!f[a.lb.$z]&&
b instanceof a.l&&(f[a.lb.uk]=!0,g.isObservable(f)?(f[a.lb.t_]&&f[a.lb.t_].dispose(),f.removeAll(),f[a.lb.B_]&&f.subscribe(f[a.lb.B_],null,"arrayChange")):f=[])}catch(c){throw c;}finally{f[a.lb.uk]=!1}};l=function(c){try{!f[a.lb.$z]&&c instanceof a.l&&(f[a.lb.uk]=!0,f.sort(function(d,e){return a.lb.G4(d,e,b.comparator,c,this)}))}catch(d){throw d;}finally{f[a.lb.uk]=!1}};b.Xp(a.ka.O.ADD,h,void 0,void 0,!0);b.Xp(a.ka.O.REMOVE,d,void 0,void 0,!0);b.Xp(a.ka.O.RESET,k,void 0,void 0,!0);b.Xp(a.ka.O.SORT,
l,void 0,void 0,!0)}else{if(void 0===b)return;f={};d=b.attributes;h=null;for(h in d)d.hasOwnProperty(h)&&(k=g.observable(b.get(h)),f[h]=k,l=e(h),l.HMa=h,k.subscribe&&k.subscribe(l));d=function(b){var c,d;try{for(d in f[a.lb.uk]=!0,c=b.OX(),c)if(c.hasOwnProperty(d))f[d](b.get(d))}catch(e){throw e;}finally{f[a.lb.uk]=!1}};b.Xp(a.ka.O.CHANGE,d,void 0,void 0,!0);a.lb.uda(f,b);c&&c(f)}return f};o_("KnockoutUtils.map",a.lb.map,a);a.lb.Tc=function(b){return b instanceof a.D?b:b.hasOwnProperty(a.lb.YY)?b[a.lb.YY]:
b};a.lb.G4=function(b,c,d,e,f){return a.l.W0(a.lb.Tc(b),a.lb.Tc(c),d,e,f)};a.lb.uda=function(b,c){Object.defineProperty(b,a.lb.YY,{value:c,enumerable:!1})}});