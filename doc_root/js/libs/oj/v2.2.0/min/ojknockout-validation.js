/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","knockout","ojs/ojknockout","ojs/ojmessaging"],function(a,g,b){a.xc=function(){};a.xc.HB="invalidComponentTracker";a.xc.L1="ojoptionchange";a.xc.gq="messagesShown";a.xc.fs="messagesHidden";a.xc.ds="disabled";a.xc.RB="readOnly";a.xc.qt=function(c,d,e,f,h){e={};h=h.call()[a.xc.HB];var k;if(c===a.xc.ds||c===a.xc.RB)return k=h&&h.peek()||null,null!==k&&b.isWriteableObservable(h)&&k.qt.call(k,f,c,d)&&h.valueHasMutated(),e[c]=d,e};a.xc._init=function(a,b){var e={};e[a]=b;return e};
a.xc.opa=function(b,d,e,f){f=f.call();var h;b===a.xc.HB&&(h=f[b]?!0:!1)&&a.xc.yBa(b,f,d,e);return{}};a.xc.Ppa=function(c,d,e,f){d=g(d);f=f.call()[c];c===a.xc.HB&&d&&(d.off(a.xc.L1,a.xc.aea),f&&b.isWriteableObservable(f)&&(c=f.peek(),c.Md.call(c,e)&&f.valueHasMutated()))};a.xc.aea=function(c,d){var e=c.data.x_,f,h=c.data.R,k=d.option,g=d.value;(k===a.xc.gq||k===a.xc.fs)&&e&&b.isWriteableObservable(e)&&(f=e.peek())&&f.qt.call(f,h,k,g)&&e.valueHasMutated()};a.xc.yBa=function(c,d,e,f){c=d[c];var h,k;
e=g(e);if(b.isObservable(c))k=c.peek(),null==k&&(k=new a.Kc,c(k));else throw Error("Binding attribute "+a.xc.HB+" should be bound to a ko observable.");null!==k&&(b.isWriteableObservable(c)&&(d=f.call(f,"option",a.xc.gq),h=f.call(f,"option",a.xc.fs),k.qt.call(k,f,a.xc.gq,d),k.qt.call(k,f,a.xc.fs,h),c.valueHasMutated()),f={x_:c,R:f},e.on(a.xc.L1,f,a.xc.aea))};a.ya.Ug().$g({"for":"editableValue",attributes:[a.xc.HB,a.xc.ds,a.xc.RB],init:a.xc._init,update:a.xc.qt,afterCreate:a.xc.opa,beforeDestroy:a.xc.Ppa});
a.Kc=function(){this.Init()};o_("InvalidComponentTracker",a.Kc,a);a.b.sa(a.Kc,a.b,"oj.InvalidComponentTracker");a.Kc.gq="messagesShown";a.Kc.fs="messagesHidden";a.Kc.ds="disabled";a.Kc.RB="readOnly";a.Kc.prototype.Init=function(){a.Kc.u.Init.call(this);this.Pz=[];this.Ss=[];this.gz=[];this.invalidHidden=this.invalidShown=!1};a.Kc.prototype.xfa=function(){var a=null,b=this,e=this.HL;this.invalidShown&&(a=this.iT());setTimeout(function(){(a=e===b.HL?a||b.iT():b.iT())&&a.call(a,"Focus")},1);return a?
!0:!1};a.b.g("InvalidComponentTracker.prototype.focusOnFirstInvalid",{xfa:a.Kc.prototype.xfa});a.Kc.prototype.showMessages=function(){var a,b,e;if(this.invalidHidden)for(b=this.gz.length,e=0;e<b;e++)this.gz[e]&&(a=this.Pz[e].call(a,"showMessages"))};a.b.g("InvalidComponentTracker.prototype.showMessages",{showMessages:a.Kc.prototype.showMessages});a.Kc.prototype.iT=function(){for(var a,b=0,e=this.Ss.length,b=0;b<e;b++)if(a=this.Ss[b])return this.Pz[b];return null};a.Kc.prototype.Md=function(a){var b=
-1,e=!1;g.each(this.Pz,function(e,h){0>b&&h===a&&(b=e)});0<=b&&(this.Pz.splice(b,1),this.Ss.splice(b,1),this.gz.splice(b,1),this.uX(),e=!0);return e};a.Kc.prototype.qt=function(b,d,e){var f=b.call(b,"isValid"),h=-1,k=!0,l;g.each(this.Pz,function(a,d){0>h&&d===b&&(h=a)});switch(d){case a.Kc.gq:case a.Kc.fs:l=!1;e&&(0>h&&(h=this.Pz.push(b)-1,this.xya(h,l)),!f&&a.Kc.xU(e)&&(l=!0,d===a.Kc.gq&&(e=b.call(b,"option",a.Kc.ds),f=b.call(b,"option",a.Kc.RB),l=e||f?!1:!0)),k=this.RE(d,h||0,l),this.uX(),k&&(void 0===
this.HL&&(this.HL=0),this.HL++));break;case a.Kc.ds:case a.Kc.RB:k=!1,e&&(k=this.RE(a.Kc.gq,h||0,!1),k=this.RE(a.Kc.fs,h||0,!1)||k,this.uX())}return k};a.Kc.prototype.xya=function(b,d){void 0===this.Ss[b]&&this.RE(a.Kc.gq,b,d);void 0===this.gz[b]&&this.RE(a.Kc.fs,b,d)};a.Kc.prototype.uX=function(){this.invalidShown=0<=this.Ss.indexOf(!0);this.invalidHidden=0<=this.gz.indexOf(!0)};a.Kc.prototype.RE=function(b,d,e){var f=!1;b=b===a.Kc.gq?this.Ss:b===a.Kc.fs?this.gz:[];0<=d&&void 0!==b[d]?(f=b[d]!==
e?!0:!1)&&b.splice(d,1,e):(b.push(e),f=!0);return f};a.Kc.xU=function(b){return!a.ia.isValid(b)}});