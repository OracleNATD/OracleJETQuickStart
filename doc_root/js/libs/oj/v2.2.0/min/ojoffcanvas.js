/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","hammerjs","promise","ojs/ojjquery-hammer","ojs/ojcomponentcore"],function(a,g,b){a.j={};o_("OffcanvasUtils",a.j,a);a.j.FP="oj-offcanvasEdge";a.j.bq="oj-offcanvas";a.j.GP="oj-mediaQueryListener";a.j.x1="oj-offcanvasHammer";a.j.y1="oj-offcanvasStyle";a.j.yB="selector";a.j.ux="content";a.j.wu="start";a.j.vu="end";a.j.jB="top";a.j.BG="bottom";a.j.tu="displayMode";a.j.uu="push";a.j.AO="overlay";a.j.V_="pin";a.j.bla="modality";a.j.BLa="none";a.j.cla="modal";a.j.AG="_dismissHandler";
a.j.$O="_openPromise";a.j.hB="_closePromise";a.j.Au="_glassPane";a.j.J0="_surrogate";a.j.gP="data-oj-offcanvas-surrogate-id";a.j.mla="oj-offcanvas-outer-wrapper";a.j.uB="oj-offcanvas-open";a.j.mh="oj-offcanvas-transition";a.j.u0="oj-offcanvas-pin";a.j.t0="oj-offcanvas-pin-transition";a.j.Jka="oj-offcanvas-glasspane";a.j.mB="oj-offcanvas-glasspane-dim";a.j.Gla="ojbeforeopen veto";a.j.Fla="ojbeforeclose veto";a.j.RDa={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",
bottom:"oj-offcanvas-shift-up"};a.j.Usa={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"};a.j.jua=function(b){b=b[a.j.tu];b!==a.j.AO&&b!==a.j.uu&&b!==a.j.V_&&(b=(a.md.Bf("oj-offcanvas-option-defaults")||{}).displayMode);return b};a.j.Kg=function(b){return g(b[a.j.yB])};a.j.iz=function(b){return b[a.j.bla]===a.j.cla};a.j.Xs=function(b){return b.hasClass(a.j.uB)};a.j.Is=function(b){return b.closest("."+a.j.mla)};a.j.aJ=function(b){var d=a.j.Kg(b);
return a.j.uaa(b)||b[a.j.tu]===a.j.AO?d:d.parent()};a.j.nva=function(b){var d=a.j.RDa[b];if(!d)throw"Invalid edge: "+b;return d};a.j.gg=function(){return"rtl"===a.C.In()};a.j.Yk=function(a,b){a.css({"-webkit-transform":b,transform:b})};a.j.MJ=function(b,d,e){b=b===a.j.vu;if(a.j.gg()||e)b=!b;return"translate3d("+(b?"-":"")+d+", 0, 0)"};a.j.BE=function(b,d,e){a.j.Yk(b,a.j.MJ(d,e,!1))};a.j.L8=function(b,d){return"translate3d(0, "+(b===a.j.BG?"-":"")+d+", 0)"};a.j.GDa=function(b,d,e){a.j.Yk(b,a.j.L8(d,
e))};a.j.M8=function(a,b){return"translate3d(0, "+(b?"-":"")+a+", 0)"};a.j.QCa=function(b,d,e){b.addClass(a.j.mh);a.j.Yk(b,"translate3d(0, 0, 0)");d.addClass(a.j.mh);a.j.Yk(d,e)};a.j.jca=function(b){var d=b.edge;b=a.j.Kg(b);d&&d.length||(d=b.hasClass("oj-offcanvas-start")?a.j.wu:b.hasClass("oj-offcanvas-end")?a.j.vu:b.hasClass("oj-offcanvas-top")?a.j.jB:b.hasClass("oj-offcanvas-bottom")?a.j.BG:a.j.wu);g.data(b[0],a.j.FP,d);return d};a.j.eT=function(b){return g.data(b[0],a.j.FP)};a.j.LE=function(b,
d,e){var f=b[a.j.tu],g=a.j.Kg(b),k=a.j.uB,f=f===a.j.AO?a.j.mh+" oj-offcanvas-overlay":a.j.mh;e?(g.addClass(k),d.addClass(f)):(b.makeFocusable&&a.C.GN({element:g,remove:!0}),b=b.tabindex,void 0===b?g.removeAttr("tabindex"):g.attr("tabindex",b),g.removeClass(k),d.removeClass(f))};a.j.$j=function(b){var d=a.j.Kg(b),e=d.find("[autofocus]");0==e.length&&(e=d.find(":tabbable"));0==e.length?(e=d.attr("tabindex"),void 0!==e&&(b.tabindex=e),d.attr("tabindex","-1"),e=d,a.C.GN({element:d,applyHighlight:!0}),
b.makeFocusable=!0):e=e[0];a.oe.iF(e)};a.j.Hya=function(a){return"none"!=a.autoDismiss};a.j.Vo=function(a,b){function e(){b(a);a.off("transitionend.oc webkitTransitionEnd.oc otransitionend.oc oTransitionEnd.oc",e)}a.on("transitionend.oc webkitTransitionEnd.oc otransitionend.oc oTransitionEnd.oc",e)};a.j.e5=function(b){a.j.close(b)["catch"](function(b){a.t.warn("Offcancas close failed: "+b)})};a.j.pE=function(b){a.j.mX(b);if(a.j.Hya(b)){var d=a.j.Kg(b),e=b[a.j.AG]=function(e){var f=e.target;a.C.pha(e)||
"focus"===e.type&&!g(f).is(":focusable")||(null==g.data(d[0],a.j.bq)?a.j.mX(b):a.C.lJa(d[0],f)||a.j.e5(b))},f=document.documentElement;a.C.hf()&&f.addEventListener("touchstart",e,!0);f.addEventListener("mousedown",e,!0);f.addEventListener("focus",e,!0)}a.j.Bz(b)};a.j.mX=function(b){var d=b[a.j.AG];if(d){var e=document.documentElement;a.C.hf()&&e.removeEventListener("touchstart",d,!0);e.removeEventListener("mousedown",d,!0);e.removeEventListener("focus",d,!0);delete b[a.j.AG];b[a.j.AG]=null}a.j.EL(b)};
a.j.Bz=function(c){if(a.C.hf()){var d=c[a.j.yB],e=g(d),f=a.j.eT(e),h,k;f===a.j.wu&&!a.j.gg()||f===a.j.vu&&a.j.gg()?(k={recognizers:[[b.Swipe,{direction:b.DIRECTION_LEFT}]]},h="swipeleft"):f===a.j.wu&&a.j.gg()||f===a.j.vu&&!a.j.gg()?(k={recognizers:[[b.Swipe,{direction:b.DIRECTION_RIGHT}]]},h="swiperight"):f===a.j.jB?(k={recognizers:[[b.Swipe,{direction:b.DIRECTION_UP}]]},h="swipeup"):f===a.j.BG&&(k={recognizers:[[b.Swipe,{direction:b.DIRECTION_DOWN}]]},h="swipedown");f=e.tj(k).on(h,function(b){b.target===
e[0]&&(b.preventDefault(),a.j.e5(c))});g.data(g(d)[0],a.j.x1,{event:h,hammer:f})}};a.j.EL=function(b){b=a.j.Kg(b);0<b.length&&(b=g.data(b[0],a.j.x1))&&b.hammer.off(b.event)};a.j.Rya=function(b){return a.j.Is(b).hasClass("oj-offcanvas-page")};a.j.pK=function(b){return b[a.j.tu]===a.j.V_};a.j.uaa=function(b){return b[a.j.ux]||a.j.Rya(a.j.Kg(b))||a.j.pK(b)};a.j.DCa=function(b){var d=b.attr("style");void 0!==d&&g.data(b[0],a.j.y1,d)};a.j.yCa=function(b){var d=g.data(b[0],a.j.y1);d?b.attr("style",d):b.removeAttr("style")};
a.j.Nq=function(b,d){var e=a.j.eT(b),e=a.j.nva(e),f=a.j.Is(b);a.o.we(f,jQuery);var g=f.hasClass(e);d||f.toggleClass(e,!g);return g};a.j.CI=function(a,b){function e(){null==("fixed"===g(a).css("position")?a.parentNode.offsetParent:a.offsetParent)?b():f=window.requestAnimationFrame(e)}var f=0,f=window.requestAnimationFrame(e);return function(){0!==f&&window.cancelAnimationFrame(f)}};a.j.ns=function(b){var d=a.j.Kg(b),e=a.j.pK(b);if(g.data(d[0],a.j.bq)===b){a.j.eT(d);var f=a.j.aJ(b);e?d.removeClass(a.j.uB+
" "+a.j.t0):a.j.LE(b,f,!1);a.j.UBa(b);a.j.mX(b);e&&(a.j.Is(d).removeClass(a.j.u0),a.j.yCa(d));d.trigger("ojclose",b);g.removeData(d[0],a.j.bq)}};a.j.Uca=function(b,d,e){var f=g(b);(d=!!d)&&a.j.Xs(f)&&a.j.oq(b,!1);f.toggleClass(a.j.Usa[e],!d)};a.j.UKa=function(b){var d=b.query;if(null!==d){var e=b[a.j.yB],d=window.matchMedia(d),f=a.j.jca(b);b=function(b){a.j.Uca(e,b.matches,f)};d.addListener(b);a.j.Uca(e,d.matches,f);g.data(g(e)[0],a.j.GP,{mqList:d,mqListener:b})}};o_("OffcanvasUtils.setupResponsive",
a.j.UKa,a);a.j.hLa=function(b){b=a.j.Kg(b);var d=g.data(b[0],a.j.GP);d&&(d.mqList.removeListener(d.mqListener),g.removeData(b[0],a.j.GP))};o_("OffcanvasUtils.tearDownResponsive",a.j.hLa,a);a.j.uAa=function(b,d,e){function f(e){e.removeClass(a.j.mh);l?l=!1:(a.j.$j(b),h.trigger("ojopen",b),a.j.pE(b),d(!0))}var h=a.j.Kg(b),k=g(b[a.j.ux]);a.o.we(k,jQuery);var l=!0,m=b.size,r;h.addClass(a.j.uB);window.setTimeout(function(){e===a.j.wu||e===a.j.vu?(void 0===m&&(m=h.outerWidth(!0)+"px"),a.j.Yk(h,a.j.MJ(e,
m,!0)),r=a.j.MJ(e,m,!1)):(void 0===m&&(m=h.outerHeight(!0)+"px"),a.j.Yk(h,a.j.M8(m,e===a.j.jB)),r=a.j.M8(m,e!==a.j.jB));window.setTimeout(function(){a.j.QCa(h,k,r);a.j.Nq(h,!1)},0)},0);a.j.$H(b,h);a.j.Vo(k,f);a.j.Vo(h,f)};a.j.pAa=function(b,d,e){var f=a.j.Kg(b);a.j.LE(b,f,!0);var g=b.size;g&&(e===a.j.wu||e===a.j.vu?a.j.Yk(f,a.j.MJ(e,g,!0)):a.j.Yk(f,a.j.L8(e,g)));window.setTimeout(function(){a.j.Nq(f,!1)},10);a.j.$H(b,f);a.j.Vo(f,function(){f.removeClass(a.j.mh);a.j.$j(b);f.trigger("ojopen",b);a.j.pE(b);
d(!0)})};a.j.qAa=function(b,d){var e=a.j.Kg(b),f=g(b[a.j.ux]);a.o.we(f,jQuery);var h=b.size;e.addClass(a.j.uB);window.setTimeout(function(){void 0===h&&(h=e.outerWidth(!0)+"px");e.addClass(a.j.t0);a.j.Is(e).addClass(a.j.u0);a.j.DCa(e);a.j.Yk(e,"none");window.setTimeout(function(){e.css("min-width",h);a.j.Nq(e,!1)},10)},0);a.j.$H(b,e);a.j.Vo(e,function(){a.j.$j(b);e.trigger("ojopen",b);a.j.pE(b);d(!0)})};a.j.Nqa=function(b,d,e,f){function h(e){l&&e?l=!1:(k.removeClass(a.j.mh),a.j.Yk(k,""),a.j.ns(b),
m&&m(),d(!0))}var k=g(b[a.j.ux]),l=!0,m;f&&(a.j.Vo(e,h),a.j.Vo(k,h),m=a.j.CI(e[0],h));a.j.Yk(e,"");a.j.Yk(k,"");a.j.Nq(e,!1);a.j.iz(b)&&b[a.j.Au].removeClass(a.j.mB);f?(k.addClass(a.j.mh),e.addClass(a.j.mh)):(a.j.ns(b),d(!0))};a.j.Lqa=function(b,d,e,f){function g(){a.j.ns(b);k&&k();d(!0)}var k;f&&(a.j.Vo(e,g),k=a.j.CI(e[0],g));a.j.Nq(e,!1);a.j.iz(b)&&b[a.j.Au].removeClass(a.j.mB);f?e.addClass(a.j.mh):(a.j.ns(b),d(!0))};a.j.oAa=function(b,d,e,f){var g=a.j.Kg(b),k=a.j.aJ(b);a.o.we(k,jQuery);a.j.LE(b,
k,!0);var l;e===a.j.wu||e===a.j.vu?(l=void 0===l?g.outerWidth(!0)+"px":l,f===a.j.uu&&a.j.BE(k,e,l)):(l=void 0===l?g.outerHeight(!0)+"px":l,f===a.j.uu&&a.j.GDa(k,e,l));window.setTimeout(function(){a.j.Nq(g,!1)},10);a.j.$H(b,g);a.j.Vo(k,function(){k.removeClass(a.j.mh);a.j.$j(b);g.trigger("ojopen",b);a.j.pE(b);d(!0)})};a.j.Mqa=function(b,d,e,f){function g(){a.j.ns(b);k&&k();d(!0)}var k;f&&(a.j.Vo(e,g),k=a.j.CI(e[0],g));a.j.Nq(e,!1);a.j.iz(b)&&b[a.j.Au].removeClass(a.j.mB);f?e.css("min-width","0"):(a.j.ns(b),
d(!0))};a.j.Kqa=function(b,d,e,f){function g(){a.j.ns(b);m&&m();d(!0)}var k=b[a.j.tu],l=a.j.aJ(b),m;f&&(a.j.Vo(l,g),m=a.j.CI(e[0],g));k===a.j.uu&&a.j.Yk(l,"");a.j.Nq(e,!1);a.j.iz(b)&&b[a.j.Au].removeClass(a.j.mB);f?l.addClass(a.j.mh):(a.j.ns(b),d(!0))};a.j.open=function(b){var d=a.j.Kg(b),e=g.data(d[0],a.j.bq);if(e){if(e[a.j.hB])return e[a.j.hB];if(e[a.j.$O])return e[a.j.$O]}var f=!1,h=new Promise(function(e,l){a.o.we(d,jQuery);var m=a.j.jca(b),r=g.Event("ojbeforeopen");d.trigger(r,b);if(!1===r.result)return l(a.j.Gla),
f=!0,h;var r=a.j.jua(b),t=a.j.pK(b);!t||m!==a.j.jB&&m!==a.j.BG||(r=a.j.uu);var s=g.extend({},b);s[a.j.tu]=r;g.data(d[0],a.j.bq,s);if(b[a.j.ux]){if(!a.j.uaa(b))throw"Error: Both main content selector and the inner wrapper \x3cdiv class\x3d'oj-offcanvas-inner-wrapper'\x3e are provided. Please remove the inner wrapper.";t?a.j.qAa(s,e):r===a.j.uu?a.j.uAa(s,e,m):a.j.pAa(s,e,m)}else a.j.oAa(s,e,m,r)});f||(e=g.data(d[0],a.j.bq))&&(e[a.j.$O]=h);return h};o_("OffcanvasUtils.open",a.j.open,a);a.j.close=function(b){return a.j.oq(b[a.j.yB],
!0)};o_("OffcanvasUtils.close",a.j.close,a);a.j.oq=function(b,d){var e=g(b);a.o.we(e,jQuery);var f=g.data(e[0],a.j.bq);if(f&&f[a.j.hB])return f[a.j.hB];var h=!1,k=new Promise(function(l,m){if(a.j.Xs(e)){b!=f[a.j.yB]&&l(!0);a.j.Nq(e,!0)||l(!0);var r=g.Event("ojbeforeclose");e.trigger(r,f);if(!1===r.result)return m(a.j.Fla),h=!0,k;var r=a.j.pK(f),t=f[a.j.tu];f[a.j.ux]?t===a.j.uu?a.j.Nqa(f,l,e,d):r?a.j.Mqa(f,l,e,d):a.j.Lqa(f,l,e,d):a.j.Kqa(f,l,e,d)}else l(!0)});h||(f=g.data(e[0],a.j.bq))&&(f[a.j.hB]=
k);return k};a.j.toggle=function(b){var d=a.j.Kg(b);a.o.we(d,jQuery);return a.j.Xs(d)?a.j.close(b):a.j.open(b)};o_("OffcanvasUtils.toggle",a.j.toggle,a);a.j.Voa=function(b){var d=g("\x3cdiv\x3e");d.addClass(a.j.Jka);d.attr("role","presentation");d.attr("aria-hidden","true");d.appendTo(b.parent());d.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(a){a.stopPropagation();a.preventDefault()});return d};a.j.bS=function(b){var d=g("\x3cscript\x3e"),e=b.attr("id");
e?(e=[e,"surrogate"].join("_"),d.attr("id",e)):e=d.uniqueId();d.insertBefore(b);b.attr(a.j.gP,e);return d};a.j.nEa=function(b,d){b[a.j.J0]=a.j.bS(d);d.appendTo(d.parent())};a.j.wCa=function(b){var d=a.j.Kg(b);b=b[a.j.J0];d&&b&&d.attr(a.j.gP)===b.attr("id")&&(d.insertAfter(b),d.removeAttr(a.j.gP),b.remove())};a.j.$H=function(b,d){a.j.iz(b)&&(b[a.j.Au]=a.j.Voa(d),a.j.nEa(b,d),window.setTimeout(function(){b[a.j.Au].addClass(a.j.mB)},0))};a.j.UBa=function(b){a.j.iz(b)&&(b[a.j.Au].remove(),a.j.wCa(b))};
a.j.zja=function(c){var d,e,f,h,k,l,m,r,t,s,q,p;null==g(c).attr("oj-data-pansetup")&&(g(c).attr("oj-data-pansetup","true"),c.displayMode="push",d=a.j.Kg(c),e=c.size,null==e&&(e=d.outerWidth()),f=a.j.Is(d),h=a.j.aJ(c),k={recognizers:[[b.Pan,{direction:b.DIRECTION_HORIZONTAL}]]},l=!1,g(f).tj(k).on("panstart",function(e){m=null;switch(e.gesture.direction){case b.DIRECTION_LEFT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(m=a.j.gg()?"end":"start");break;case b.DIRECTION_RIGHT:Math.abs(e.gesture.deltaY)<
Math.abs(e.gesture.deltaX)&&(m=a.j.gg()?"start":"end")}null!=m&&(r={direction:m,distance:Math.abs(e.gesture.deltaX)},t=g.Event("ojpanstart"),d.trigger(t,r),t.isDefaultPrevented()||(c._closePromise=null,h.off(".oc"),a.j.LE(c,h,!0),l=!0,e.gesture.srcEvent.stopPropagation(),e.stopPropagation()))}).on("panmove",function(b){l&&(s=b.gesture.deltaX,"start"==m&&0<s||"end"==m&&0>s?a.j.BE(h,"start","0px"):(d.css("width",Math.abs(s)),h.removeClass(a.j.mh),a.j.BE(h,"start",s+"px"),r={direction:m,distance:Math.abs(s)},
t=g.Event("ojpanmove"),d.trigger(t,r),b.gesture.srcEvent.stopPropagation(),b.stopPropagation()))}).on("panend",function(b){l&&(l=!1,s=Math.abs(b.gesture.deltaX),r={distance:s},t=g.Event("ojpanend"),d.trigger(t,r),b.stopPropagation(),t.isDefaultPrevented()?(p=function(){a.j.LE(c,h,!1);h.removeClass(a.j.mh);h.off("transitionend webkitTransitionEnd otransitionend oTransitionEnd",p)},h.on("transitionend webkitTransitionEnd otransitionend oTransitionEnd",p),h.addClass(a.j.mh),a.j.BE(h,"start","0px")):
(q=c.edge,null==q&&(q=d.hasClass("oj-offcanvas-start")?"start":"end"),a.j.xpa(h,d,q,e),g.data(d[0],a.j.bq,c),g.data(d[0],a.j.FP,q),a.j.pE(c)))}))};o_("OffcanvasUtils.setupPanToReveal",a.j.zja,a);a.j.xpa=function(b,d,e,f){var g,k,l,m,r,t,s,q,p,n;b.removeClass(a.j.mh);g=Math.round(1E3/60);k=b.css("transform").split("(")[1].split(")")[0].split(",");l=parseInt(k[4],10);m="end"==e?0-f:f;t=Math.max(1,Math.abs(m-l)/(400/g));s=(new Date).getTime();q=function(){p=(new Date).getTime();n=Math.max(t,t*Math.max((p-
s)/g));s=p;l<m?l=Math.min(m,l+n):l>m&&(l=Math.max(m,l-n));a.j.BE(b,e,Math.abs(l)+"px");d.css("width",Math.abs(l)+"px");l==m?(window.cancelAnimationFrame(r),b.addClass(a.j.mh)):r=window.requestAnimationFrame(q)};r=window.requestAnimationFrame(q)};a.j.Oja=function(b){b=a.j.Kg(b);g(a.j.Is(b)).off("panstart panmove panend")};o_("OffcanvasUtils.tearDownPanToReveal",a.j.Oja,a)});