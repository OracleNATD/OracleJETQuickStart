/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var p;function ba(a,b){0==a.indexOf("dvt.")&&(a=a.substring(4));var c=a.split("."),d=eval("dvt");c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function b(a){this.Init(a)}function c(a,b,c,d){this.Init(b,c,d);this.ga=a}function d(){}function e(){this.Init({alta:e.lh})}function f(a,b,c){this.Init(a,b,c)}function h(a,b,c,d,e,f,h,k,l){this.Init(a,b,c,d,e,f,h,k,l)}function k(a){this.HE=a}a.Wh=function(a,b,c){this.Init(a,b,c)};a.v.F(a.Wh,a.Le);a.Wh.newInstance=function(b,c,d){return new a.Wh(b,c,d)};a.Wh.prototype.Init=function(d,f,h){a.Wh.C.Init.call(this,d,f,h);this.u().Re.Ua().setAttributeNS(null,"text-rendering","geometricPrecision");
this.H=new c(this,d,this.ag,this);this.H.Lf(this);a.B.Wa()||this.H.cs(new b(this.H));this.Xg=new e;this.fc=[];this.hw=[];this.kk=null;this.Xj=new a.Gf(this.u());this.H.eS(this.Xj)};a.Wh.prototype.ta=function(b,c,d){isNaN(c)||isNaN(d)||(this.xb=c,this.Kb=d);this.e_();this.yf(b);this.Bq();this.Gj=this.Fa;this.y1=this.fc;this.fc=[];this.LLa=[];this.Fa=new a.ma(this.u());this.A(this.Fa);l.ta(this,this.Fa,new a.Z(0,0,this.xb,this.Kb));this.Sc&&this.Sc.At(this.W.selection,this.Cw());c=this.W.animationDuration;
d=new a.Z(0,0,this.xb,this.Kb);this.Gj?"none"!==this.W.animationOnDataChange&&b&&(this.ai=new a.ma(this.u()),this.A(this.ai),b=new a.xq(this.u(),this.ai),b.Ho(this.y1,this.fc),this.Xb=b.xw()):"none"!==this.W.animationOnDisplay&&(this.Xb=a.pc.$E(this.u(),a.pc.YC,this.Fa,d,c));this.Xb?(this.H.ue(),this.H.Pj(this),this.Xb.mg(this.RCa,this),this.Xb.play()):this.RCa();this.lr()};a.Wh.prototype.Axa=function(a){this.fc=a};a.Wh.prototype.oh=function(){this.Rd||(this.Rd=new k(this));return this.Rd};a.Wh.prototype.WM=
function(a,b){this.hw.push(a);this.LLa[b]=a};a.Wh.prototype.Cw=function(){return this.hw};a.Wh.prototype.il=function(){return this.LLa};a.Wh.prototype.Ze=function(b){this.W.highlightedCategories=a.bc.clone(b);a.uh.Ze(b,this.Cw(),"any"===this.W.highlightMatch);this.kk&&this.kk.Ze(b)};a.Wh.prototype.select=function(b){this.W.selection=a.bc.clone(b);this.Sc&&this.Sc.At(this.W.selection,this.Cw())};a.Wh.prototype.yf=function(b){b?this.W=this.Xg.jn(b):this.W||(this.W=this.SF());b=this.W.selectionMode;
this.Sc="single"===b?new a.Sc(a.Sc.Yy):"multiple"===b?new a.Sc(a.Sc.Xy):null;this.H.EA(this.Sc);a.B.wj()||(this.W.animationOnDisplay="none",this.W.animationOnDataChange="none")};a.Wh.prototype.hm=function(){return a.I.Ef(this.D(),"componentName",a.I.Ia,"TAG_CLOUD")};a.Wh.prototype.RCa=function(){this.Gj&&(this.removeChild(this.Gj),this.Gj.ya(),this.Gj=null);this.ai&&(this.removeChild(this.ai),this.ai.ya(),this.ai=null);this.Xb&&this.H.Lf(this);this.W.highlightedCategories&&0<this.W.highlightedCategories.length&&
this.Ze(this.W.highlightedCategories);this.em||this.Aq();this.Xb=null;this.em=!1};a.Wh.prototype.e_=function(){this.H.ue();this.hw.length=0};a.Wh.prototype.ag=function(b,c){var d=b.type;if("categoryHide"==d||"categoryShow"==d){var e=b.category,f=a.na.lb(this.W.hiddenCategories,e);"categoryHide"==d&&0>f&&this.W.hiddenCategories.push(e);"categoryShow"==d&&0<=f&&this.W.hiddenCategories.splice(f,1);this.ta(this.W,this.xb,this.Kb)}else"categoryHighlight"==d&&(this!=c?this.Ze(b.categories):this.kk&&this.kk!=
c&&this.kk.ag(b,c));b&&this.dispatchEvent(b)};a.Wh.prototype.Qob=function(a){return this.Sc?a[0]:null};a.Wh.prototype.Llb=function(a){a.wb()||(this.Sc.tq(a,!1),this.H.kI());a=[];for(var b=this.Sc.getSelection(),c=0;c<b.length;c++){var d=b[c];d instanceof f&&a.push(d.getId())}return a};a.Wh.prototype.it=function(){for(var a=[],b=this.Sc.getSelection(),c=0;c<b.length;c++)a=a.concat(b[c].Se());return a};a.Wh.prototype.Zl=function(a,b,c){return this.Xj.Zl(c)};a.Wh.prototype.Lm=function(a,b){return this.Xj.Lm(a,
b)};a.Wh.prototype.eA=function(a,b){return this.Xj.eA(a,b)};a.Wh.prototype.tC=function(a,b){return this.Xj.tC(a,b)};a.v.F(k,a.Rd);k.prototype.Cn=function(a){return(a=this.HE.H.mb(a))&&a instanceof f?"item["+this.HE.il().indexOf(a)+"]":null};k.prototype.ph=function(b){if(b==a.Rd.vD)return this.WF(this.HE);var c=b.indexOf("[");return 0<c&&"item"===b.substring(0,c)&&(b=parseInt(b.substring(c+1,b.length-1)),b=this.HE.il()[b])?b.Se()[0].Ua():null};k.prototype.getItem=function(a){if(a=this.HE.il()[a]){var b=
{};b.color=a.Wl();b.tooltip=a.ne();b.label=a.me();b.value=a.getValue();b.selected=a.wb();return b}return null};k.prototype.qM=function(){return this.HE.Cw().length};a.v.F(h,a.Ke);h.i5a=.3;h.j5a=.6;h.Bga=0;h.J5=1;h.Cga=2;h.prototype.Init=function(a,b,c,d,e,f,k,l,n){h.C.Init.call(this,b,c,d,e,f,n);this.HE=a;this.QE();this.If.ea(k);this.If.Je(l);f&&this.rIa(f)};h.prototype.lc=function(a){this.Ol!=a&&((this.Ol=a)?this.Up?this.Ab(this.vaa):this.Ab(this.rca):this.Ab(this.tL))};h.prototype.pd=function(){this.Up||
(this.Up=!0,this.Ol?this.Ab(this.vaa):this.Ab(this.Voa))};h.prototype.Jc=function(){this.Ol?this.Ab(this.rca):this.Ab(this.tL);this.Up=!1};h.prototype.tg=function(b,c){var d=new a.jd(this.u(),this,n.pb(this.HE)),e=this.Jd(),f=c.Jd(),k=!1,l=f.M(a.j.mc),w=e.M(a.j.mc);if(l!=w){var D=this;this.Ab(e.ea(a.j.mc,l));d.ka.N(a.G.xEa,this,function(){return D.Jd().M(a.j.mc)},function(b){D.Ab(D.Jd().ea(a.j.mc,b))},w)}f=parseFloat(f.M(a.j.gi));e=parseFloat(e.M(a.j.gi));f!=e&&(k=!0,D=this,this.fh(f),d.ka.N(a.G.V,
this,function(){return parseFloat(D.Jd().M(a.j.gi))},this.fh,e));e=c.Va();f=this.Va();l=c.Wq();w=this.Wq();if(f!=e||k&&w!=l)w!=l&&(e=h.M7a(c,e,l)),this.Aa(e),d.ka.N(a.G.V,this,this.Va,this.Aa,f);k=c.kb();e=this.kb();e!=k&&(this.eb(k),d.ka.N(a.G.V,this,this.kb,this.eb,e));c.T(0);b.add(d,h.J5)};h.prototype.Mj=function(b){b.add(new a.Wi(this.u(),this,n.pb(this.HE)),h.Bga)};h.prototype.Oi=function(b){this.T(0);b.add(new a.hh(this.u(),this,n.pb(this.HE)),h.Cga)};h.prototype.fh=function(a){h.C.fh.call(this,
a);this.rIa(this.Jd())};h.prototype.rIa=function(b){this.tL=b.clone();b=this.tL.M(a.j.mc);this.tL.ea(a.j.Mb,null);this.Voa=this.tL.clone();var c=h.gMa(b,h.i5a);this.Voa.ea(a.j.Mb,c);this.Voa.ea(a.j.mc,a.O.Vl(c));this.rca=this.tL.clone();this.rca.ea(a.j.Mb,b);this.rca.ea(a.j.mc,a.O.Vl(b));this.vaa=this.tL.clone();b=h.gMa(b,h.j5a);this.vaa.ea(a.j.Mb,b);this.vaa.ea(a.j.mc,a.O.Vl(b))};h.M7a=function(b,c,d){b=b.Vnb();return d==a.da.Ip?c+b.a:d==a.da.Jl?c-b.a:c};h.gMa=function(b,c){var d=a.O.Ug(b),e=a.O.Rg(b),
f=a.O.Og(b);return a.O.II(Math.floor(255*(1-c)+c*d),Math.floor(255*(1-c)+c*e),Math.floor(255*(1-c)+c*f))};a.v.F(f,a.v);f.prototype.Init=function(b,c,d){this.ga=b;this.dj=c;this.Nb=d;this.FO=this.Ol=!1;d.url?(c.bg("link"),this.Qpa=a.K.vM("_blank",d.url)):c.bg("img");this.Nr()};f.prototype.getId=function(){return this.Nb.id};f.prototype.me=function(){return this.Nb.label};f.prototype.getValue=function(){return this.Nb.value};f.prototype.ne=function(){return this.Nb.shortDesc};f.prototype.Bh=function(){return this.Nb.action};
f.prototype.Qg=function(){var a=this.ga.D().tooltip;return(a=a?a.renderer:null)?this.ga.u().Df().fy(a,this.mn()):this.ne()};f.prototype.mn=function(){return{id:this.getId(),label:this.me(),color:this.Wl(),value:this.getValue()}};f.prototype.vM=function(){return this.Qpa};f.prototype.Wl=function(){return this.dj.tL.M(a.j.mc)};f.prototype.jj=function(a){this.FO=a};f.prototype.tb=function(){return this.FO};f.prototype.wb=function(){return this.Ol};f.prototype.lc=function(a){this.Ol=a;this.dj.lc(a);this.Nr()};
f.prototype.pd=function(){this.dj.pd()};f.prototype.Jc=function(){this.dj.Jc()};f.prototype.Fd=function(c){var d=this.ga.H.Cb;return c.type==a.MouseEvent.Ce||d.Vu(c)?this:d.Si(c)?b.Fd(this,c,this.ga.Cw()):null};f.prototype.tf=function(a){return this.dj.aa(a)};f.prototype.Mm=function(){return this.dj.Ua()};f.prototype.Tf=function(){this.dd=!0;this.pd()};f.prototype.Qd=function(){this.dd&&(this.dd=!1,this.Jc())};f.prototype.Kd=function(){return this.dd};f.prototype.Se=function(){return[this.dj]};f.prototype.Ed=
function(){var b=[];this.tb()&&b.push(a.I.wa(a.I.Ia,this.wb()?"STATE_SELECTED":"STATE_UNSELECTED"));return a.oa.Ik(this.ne(),b)};f.prototype.Zd=function(){return this.Nb.categories};f.prototype.Nr=function(){a.B.ij()||this.dj.Gd("label",this.Ed())};f.prototype.Cf=function(){if(!this.ff&&(this.ff=[],this.Nb.showPopupBehaviors))for(var b=this.Nb.showPopupBehaviors,c=0;c<b.length;c++)this.ff.push(new a.Vc(b[c].popupId,b[c].triggerType,b[c].alignId,b[c].align));return this.ff};f.prototype.Zl=function(a){return this.ga.Qob(a)};
f.prototype.Lm=function(){return this.ga.Llb(this)};f.prototype.it=function(){return this.ga.it()};a.v.F(e,a.fb);e.lh={animationOnDisplay:"none",animationOnDataChange:"none",emptyText:null,hiddenCategories:[],hideAndShowBehavior:"none",highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",layout:"rectangular",selectionMode:"none",_statusMessageStyle:new a.j(a.fb.Sm+"color: #333333;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_style:new a.j(a.fb.Sm+"color: #333333;")},
touchResponse:"auto"};var l={};a.v.F(l,a.v);l.ta=function(a,b,c){l.Mr(a,b,c);l.HL(a,b,c);l.FD(c);var d=a.D();d.items&&0<d.items.length?(d=l.pra(a,b,c),0<d.length?(a.Axa(d),a.H.$u(a.Cw()[0])):l.NH(a,b,c)):l.NH(a,b,c)};l.NH=function(b,c,d){var e=b.D(),f=e.emptyText;f||(f=a.I.Ef(e,"labelNoData",a.I.Ia,"NO_DATA",null));a.Ba.yp(c,f,new a.Z(d.x,d.y,d.a,d.b),b.H,e._statusMessageStyle)};l.Mr=function(b,c,d){b=new a.Rect(b.u(),d.x,d.y,d.a,d.b);b.Wb();c.A(b)};l.pra=function(b,c,e){for(var k=b.D(),l=[],u=k.items,
n=Number.MAX_VALUE,w=-Number.MAX_VALUE,D=0;D<u.length;D++)n=Math.min(n,u[D].value),w=Math.max(w,u[D].value);var n=d.$lb(n,w),w=a.na.UQ(k.hiddenCategories),B=a.j.GUa(),C=k.styleDefaults.style;!C||C instanceof Object||(C=a.j.WQ(C));for(D=0;D<u.length;D++){var y=u[D];y.categories||(y.categories=[y.label]);if(!w||!a.na.BX(w,y.categories)){var H=k.styleDefaults._style.clone(),z=y.style;!z||z instanceof Object||(z=a.j.WQ(z));var E=z&&z.color?z.color:y.color?y.color:C&&C.color?C.color:null;if(z=a.bc.Vd(z,
C)){for(var M=0;M<B.length;M++){var T=a.j.dM(B[M]);z[T]&&(H.ea(B[M],z[T]),delete z[T])}delete z.color}E&&H.ea(a.j.mc,E);H.ea(a.j.gi,n.call(null,y.value).toString());H=new h(b,b.u(),y.label,0,0,H,z,y.className,y.id);z=new f(b,H,y);b.H.nb(H,z);b.WM(z,D);"none"!==k.selectionMode&&z.jj(!0);(z.tb()||y.url||z.Bh())&&H.setCursor("pointer");l.push(H);c.A(H)}}0<l.length&&("cloud"===k.layout?d.mjb(e,l):d.$qb(e,l,a.B.ca(b.u())));return l};l.HL=function(b,c,d){var e=b.D(),f=e.legend;if(f&&f.sections){f=a.bc.clone(f);
f.orientation="horizontal";f.halign="center";f.hoverBehavior=e.hoverBehavior;f.hideAndShowBehavior=e.hideAndShowBehavior;f.hiddenCategories=e.hiddenCategories;e=a.wf.newInstance(b.u(),b.ag,b);c.A(e);var h=e.pt(f,d.a,d.b/3);e.ta(f,h.a,h.b);a.Gn.position(d,"bottom",e,h.a,h.b,0);b.kk&&(b.kk.ya(),c.removeChild(b.kk));b.kk=e}};l.FD=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);a.a=Math.round(a.a);a.b=Math.round(a.b)};a.v.F(d,a.v);d.$lb=function(a,b){return function(c){return 12+Math.ceil(2*(c-a)/
(b-a)*12)}};d.mjb=function(b,c){var d=[],e=10/180,f=10/180;b.a>b.b?e*=b.a/b.b:f*=b.b/b.a;for(var h=2*Math.PI/180,k=null,l=0,n=[],B=[],C=0;C<c.length;C++)for(var y=!1,H=0,z=4,E=c[C],M=E.aa(),l=Math.max(l,parseFloat(E.Jd().M(a.j.gi))),T=-1;!y;){var O=H%180;void 0===n[O]&&(n[O]=Math.cos(H*h));void 0===B[O]&&(B[O]=Math.sin(H*h));var ia=e*H*n[O],ga=f*H*B[O],aa=new a.Z(ia,ga,M.a,M.b),y=!0;-1!=T&&d[T].pwa(aa)&&(y=!1);if(y)for(O=0;O<C;O++)if(d[O].pwa(aa)){T=O;y=!1;break}y&&(k=k?k.uj(aa):aa,T=-1,d[C]=aa,E.Aa(ia),
E.eb(-M.y+ga));3600===H?z=3:5400===H?z=2:10800===H&&(z=1);H+=z}d=Math.max(k.a/b.a,k.b/b.b);e=k.x+k.a/2;k=k.y+k.b/2;for(O=0;O<c.length;O++)E=c[O],E.Aa(b.x+E.Va()/d+(b.a/2-e/d)),E.eb(b.y+E.kb()/d+(b.b/2-k/d)),f=parseFloat(E.Jd().M(a.j.gi)),E.fh(f/d)};d.$qb=function(b,c,e){for(var f=[],h=0,k=0,l=0,n=0;n<c.length;n++){var D=c[n],B=D.aa(),h=Math.max(h,B.a),k=Math.max(k,B.b),l=Math.max(l,parseFloat(D.Jd().M(a.j.gi)));f.push(new a.xj(B.a,B.b))}n=0;for(D=(b.a-10)/h;.001<D-n;)h=(n+D)/2,l=d.JHa(f,(b.a-10)/
h),l.length*(h*k+2)-2>b.b-10?D=h:n=h;h=n;l=d.JHa(f,(b.a-10)/h);l.push(c.length);for(n=0;n<l.length-1;n++){var B=l[n],C=l[n+1],y=0,H=0,z=!0;if(1<C-B){for(var D=0,E=B;E<C;E++)D+=f[E].a*h,H=Math.max(H,f[E].b*h);y=(b.a-10-D)/(C-B-1);n==l.length-2&&(E=.5*H,E<y&&D+(C-B)*E<.9*(b.a-10)&&(y=E,z=!1))}for(var H=5+(n+1)*(k*h+2)-2,M=e?b.a-5:5,E=B;E<C;E++){var D=c[E],T=parseFloat(D.Jd().M(a.j.gi));D.fh(T*h);D.eb(b.y+H);z&&E==C-1&&E!=B?e?(D.Sh(),D.Aa(b.x+5)):(D.Ah(),D.Aa(b.x+b.a-5)):(D.Aa(b.x+M),e?(D.Ah(),M-=f[E].a*
h+y):(D.Sh(),M+=f[E].a*h+y))}}};d.JHa=function(a,b){var c=[0],d=a[0].a+2;if(1<a.length)for(var e=1;e<a.length;e++)d+a[e].a>b&&(c.push(e),d=0),d+=a[e].a+2;return c};var n={};a.v.F(n,a.v);n.pb=function(a){return a.D().styleDefaults.animationDuration/1E3};a.v.F(c,a.H);c.prototype.jT=function(a){a=this.mb(a.target);this.Koa(a);this.nQ(a)};c.prototype.qZ=function(a){a=this.mb(a.target);this.nQ(a)};c.prototype.$w=function(a){a=this.mb(a.target);this.Koa(a);this.nQ(a)};c.prototype.Koa=function(a){a instanceof
f&&(a=a.vM())&&a.call()};c.prototype.nl=function(b){var d=!0,e=this.nf();b.keyCode==a.KeyboardEvent.Yi?this.Koa(e):d=c.C.nl.call(this,b);return d};c.prototype.zq=function(b,c,d){b=this.ga.D();"dim"==b.hoverBehavior&&(c=c.Zd?c.Zd():[],b.highlightedCategories=d?c.slice():null,d=a.$a.LI(b.highlightedCategories,d),c=a.Ta.Vr(b.styleDefaults.hoverBehaviorDelay),this.PJ.ag(d,this.ga.Cw(),c,"any"==b.highlightMatch))};c.prototype.nQ=function(b){b&&b.Bh&&b.Bh()&&this.ml(a.$a.KI("action",b.Bh(),b.getId()))};
c.prototype.QA=function(){return this.ga.D().touchResponse};a.v.F(b,a.Cb);b.prototype.Init=function(a){b.C.Init.call(this,a)};b.prototype.qF=function(a){return this.Si(a)&&!a.ctrlKey};b.prototype.Vu=function(b){return b.keyCode==a.KeyboardEvent.ki&&b.ctrlKey};b.Fd=function(b,c,d){c=c.keyCode==a.KeyboardEvent.xf||c.keyCode==a.KeyboardEvent.Uf?!0:!1;b=a.na.lb(d,b)+(c?1:-1);return b<d.length&&0<=b?d[b]:null};a.v.F(function(){},a.KS);a.Ha(a,"TagCloud",a.Wh);a.Ha(a.Wh,"newInstance",a.Wh.newInstance);a.Ha(a.Wh.prototype,
"render",a.Wh.prototype.ta);a.Ha(a.Wh.prototype,"getAutomation",a.Wh.prototype.oh);a.Ha(a.Wh.prototype,"highlight",a.Wh.prototype.Ze);a.Ha(a.Wh.prototype,"select",a.Wh.prototype.select);a.Ha(k.prototype,"getDomElementForSubId",k.prototype.ph);a.Ha(k.prototype,"getItem",k.prototype.getItem);a.Ha(k.prototype,"getItemCount",k.prototype.qM)})(dvt);
  return dvt;
});
