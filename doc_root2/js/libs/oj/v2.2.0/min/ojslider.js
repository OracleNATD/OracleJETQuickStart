/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","jqueryui-amd/widgets/draggable","ojs/ojtouchproxy"],function(a,g){(function(){a.Pa("oj.ojSlider",g.oj.editableValue,{defaultElement:"\x3cinput\x3e",version:"1.0.1",widgetEventPrefix:"oj",options:{distance:0,max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:void 0},xaa:5,nda:null,gg:function(){return"rtl"===a.C.In()},_ComponentCreate:function(){this._super();this.g$=!1;this.element.is("INPUT")?
(this.g$=!0,this.element[0].style&&(this.hEa=this.element[0].style.cssText),this.e$=this.element.css("display"),this.element.css("display","none"),this.an=this.pe?g(this.pe):g(this.element).wrap("\x3cdiv\x3e \x3c/div\x3e").parent()):this.an=this.element;this.i5()},i5:function(){this.saa=[];this.aj=null;var a="oj-slider ",a=this.Jd()?a+"oj-slider-vertical":a+"oj-slider-horizontal",a=a+" oj-component oj-form-control";this.options.UN&&(a+=" oj-read-only");this.options.disabled&&(a+=" oj-disabled");this.an.removeClass();
this.an.addClass(a);this.hi="range"===this.options.type?!0:!1;this.E4();this.Vra();this.mra();this.cqa();this.Rra();this.Yra();this.TE();this.Bn()},Ph:function(){this._super();this.pz();var a,c=this.Bma();if(c){a=this.an.find(".oj-slider-thumb");var d=c.attr("id");d||(d=c.attr("for"));a.attr("aria-labelledby",d);1<c.length&&1<a.length&&a[1].attr("aria-labelledby",String(d))}else if(c=this.element.attr("aria-label"))a=this.an.find(".oj-slider-thumb"),a.attr("aria-label",c)},Bma:function(){var a=this.Lta();
if(null!==a&&0!==a.length)return a;a=this.Kta();return null!==a&&0!==a.length?a:null},Kta:function(){var a=this.element.prop("id");if(void 0!==a){var c=g("label[for\x3d'"+a+"']");if(0<c.length)return c;a="span[for\x3d'"+a+"']";if(0!==g(a).length)return g(a)}return null},Lta:function(){var a=this.element.attr("aria-labelledby");if(void 0!==a){var c=g("label[id\x3d'"+a+"']");if(0<c.length)return c;a=g("span[id\x3d'"+a+"']");if(0<a.length)return a}return null},widget:function(){return this.an},Jl:function(a){this.nda=
a},Ri:function(){return this.nda},jJ:function(){return this.element[0].id},JT:function(a){return this.jJ()+"-thumb"+a},c7:function(){return this.jJ()+"-barValue"},Nta:function(){return this.jJ()+"-barBack"},ova:function(){return this.jJ()+"-sliderWrapper"},Yra:function(){var a,c,d="",e="class\x3d'oj-slider-thumb ui-state-default' tabindex\x3d'0' role\x3d'slider'"+("aria-valuemin \x3d '"+this.Ne()+"' ")+("aria-valuemax \x3d '"+this.vh()+"' ")+"\x3e\x3c/span\x3e",f=[];c=this.hi?2:1;for(a=0;a<c;a++)d=
"\x3cspan "+("id\x3d'"+this.JT(a)+"' ")+e,f.push(d);this.bj=g(f.join("")).appendTo(this.ep);this.nt=this.bj.eq(0);var h=this;a=0;this.bj.each(function(){g(this).data("oj-slider-thumb-index",a++);h.Jd()&&g(this).attr("aria-orientation","vertical");h.options.disabled?(g(this).attr("aria-disabled","true"),g(this).removeAttr("tabindex")):g(this).removeAttr("aria-disabled");h.options.readOnly?g(this).attr("title","read only"):g(this).removeAttr("title")})},Vra:function(){var a=this.ova(),c=this.an.find("#"+
a);c.length&&c.remove();this.ep=g("\x3cdiv\x3e\x3c/div\x3e");g(this.ep).attr("id",a);this.ep.addClass("oj-slider-container");this.element.after(this.ep);this.ep[0].style.cssText=this.hEa},mra:function(){var a=this.Nta(),c=this.an.find("#"+a);c.length&&c.remove();this.Ke=g("\x3cdiv\x3e\x3c/div\x3e");c="oj-slider-bar";c=this.Jd()?c+" oj-slider-vertical":c+" oj-slider-horizontal";g(this.Ke).attr("id",a);this.Ke.addClass(c);this.ep.append(this.Ke);var d=this;this.Ke.on("mousedown"+d.eventNamespace,function(a){d.Sba(a);
d.QD(a);d.YC().focus()})},cqa:function(){this.options.type&&(this.options.value?this.hi&&2!==this.options.value.length&&(this.options.value=[0<this.options.value.length?this.options.value[0]:this.Ne(),this.vh()],this.option("value",this.options.value,{_context:{Ed:!0,nb:!0}})):(this.options.value=this.hi?[this.Ne(),this.vh()]:this.Ne(),this.option("value",this.options.value,{_context:{Ed:!0,nb:!0}})))},Rra:function(){var a=this.options,c="";if(a.type){this.Fc=g("\x3cdiv\x3e\x3c/div\x3e");g(this.Fc).attr("id",
this.c7());this.ep.append(this.Fc);var c="oj-slider-range oj-slider-bar-value",d=this;this.Fc.on("mousedown"+d.eventNamespace,function(a){d.Sba(a);d.QD(a);d.YC().focus()});this.Fc=this.ep.find("#"+this.c7());var e="";"fromMin"===a.type?e=" oj-slider-range-min":"fromMax"===a.type&&(e=" oj-slider-range-max");this.Fc.addClass(c+e)}else this.Fc&&this.Fc.remove(),this.Fc=null},PDa:function(b){this.TW=a.Gg.rea(b)},sEa:function(b){a.Gg.$ia(b)},Bn:function(){this.Ou()&&this._hoverable(this.an);this.bj.toArray().forEach(function(a){a=
g(a);this.$u(a);this._on(a,this.vEa);this.PDa(a);this._focusable({element:a,applyHighlight:!0})},this)},_GetMessagingLauncherElement:function(){return this.an},Xf:function(){return this.YC()},b6:function(){this.bj.toArray().forEach(function(a){a=g(a);this.sEa(a)},this);this.Fc&&this.Fc.remove();this.ep&&this.ep.remove()},QEa:function(){a.C.unwrap(this.element,this.an);this.element.css("display",this.e$);this.hy(this.element)},_destroy:function(){this.b6();this.QEa();return this._super()},Sba:function(a){var c,
d,e=this.options,f=0,h=this;this.f5=this.nt;if(e.disabled||e.readOnly)return!1;c=this.Tua({x:a.pageX,y:a.pageY});d=this.vh()-this.Ne()+1;this.hi&&this.bj.each(function(a){var b=Math.abs(c-h.yv(a));if(d>b||d===b&&(a===h.oza||h.yv(a)===e.min))d=b,this.f5=g(this),f=a});this.aj=f;if(!this.f5)return!0;this.bj.hasClass("ui-state-hover")||this.dp(a,f,c);this.YC().addClass("oj-active").focus();this.Fc.addClass("oj-active");return!0},iya:function(a,c){var d=this.options;if(d.disabled||d.readOnly)return!1;
c.removeClass("oj-focus-highlight");c.addClass("oj-active").focus();this.Fc.addClass("oj-active");return!0},Vza:function(a,c){var d=this.e8(c);this.dp(a,this.aj,d,!0);d=100*this.B7(c);this.hi?this.Rca(d,this.aj):this.Oca(d);return!1},QD:function(a,c){this.bj.removeClass("oj-active");this.Fc.removeClass("oj-active");var d=this.e8(c);this.dp(a,this.aj,d);this.Nk(a,this.aj,!1);this.aj=null;return!1},Jd:function(){return"vertical"===this.options.orientation},g8:function(a){1<a&&(a=1);0>a&&(a=0);this.Jd()&&
(a=1-a);return a},Tua:function(a){var c=this.tua(a);a=this.vh()-this.Ne();this.gg()&&!this.Jd()&&(c=1-c);return this.Zk(this.Ne()+c*a)},tua:function(a){var c;this.Jd()?(c=this.Ke.height(),a=a.y-this.Ke.offset().top):(c=this.Ke.width(),a=a.x-this.Ke.offset().left);return 0===c?1:c=this.g8(a/c)},YC:function(){return this.hi?g(this.bj[this.aj]):this.nt},B7:function(a){var c;(c=a)||(c=this.YC());this.Jd()?(a=c.outerHeight()/2,a=c.offset().top+a,c=this.Ke.height(),a-=this.Ke.offset().top):(a=c.outerWidth()/
2,a=c.offset().left+a,c=this.Ke.width(),a-=this.Ke.offset().left);return 0===c?1:c=this.g8(a/c)},e8:function(a){var c;a=this.B7(a);c=this.vh()-this.Ne();this.gg()&&!this.Jd()&&(a=1-a);return this.Zk(this.Ne()+a*c)},Uua:function(a){return this.yv(a?0:1)},Pua:function(a,c,d){return 2===this.options.value.length&&(0===a&&c>d||1===a&&c<d)?d:c},dp:function(a,c,d,e){var f;this.hi?(f=this.Uua(c),d=this.Pua(c,d,f),d!==this.yv(c)&&this.uDa(a,c,d,e)):d!==this.x8()&&(this.DDa(a,d,e),e||this.g$&&this.element.val(d))},
DDa:function(a,c,d){this.DK=this.Zk(c);d||(this.yc(this.DK,a),this.TE());this.hq(this.DK,a)},Nk:function(a,c,d){this.hi?(this.Q$=this.Qua(c,this.saa[c]),this.hq(this.Q$,a),d||this.yc(this.Q$,a)):(this.hq(this.DK,a),d||this.yc(this.DK,a));this.oza=c},Qua:function(a,c){var d,e;d=this.options.value.slice();for(e=0;e<d.length;e+=1)d[e]=this.Zk(d[e]);a===this.aj&&(d[a]=c);return d},x8:function(){return this.Q8()},yv:function(a){return this.yva(a)},uDa:function(a,c,d,e){this.saa[c]=this.Zk(d);this.Nk(a,
c,e);e||this.TE()},_setOption:function(a,c,d){"value"===a&&(Array.isArray(c)?isNaN(c[0])?(this.hi=!1,this.Xo(a,c[0])):this.hi=!0:(this.hi=!1,this.Xo(a,c)));c="max"===a||"min"===a?this.Xo(a,c):"step"===a?this.ZD(c):c;"disabled"!==a&&this._super(a,c,d);"readOnly"===a&&(this.options.UN=c);"disabled"===a&&(this.options.disabled=c);switch(a){case "value":this.TE();this.pz();break;case "min":case "max":this.E4();this.TE();this.pz();break;case "orientation":case "readonly":case "step":case "type":case "disabled":this.gBa()}},
gBa:function(){this.b6();this.i5();this.Ph()},Q8:function(){var a=this.options.value;return a=this.Zk(a)},yva:function(a){return this.Zk(this.options.value[a])},Zk:function(a){if(a<=this.Ne())return this.Ne();if(a>=this.vh())return this.vh();var c=0<this.options.step?this.options.step:1,d=(a-this.Ne())%c;a-=d;2*Math.abs(d)>=c&&(a+=0<d?c:-c);return parseFloat(a.toFixed(5))},E4:function(){var a=this.Ne();this.max=0!==(this.options.max-a)/this.options.step%1?this.options.max-(this.options.max-a)%this.options.step:
this.options.max},Ne:function(){return this.options.min},vh:function(){return this.max},C7:function(){var a;a=0<this.options.step?(this.vh()-this.Ne())/this.options.step:100;a=(this.Jd()?this.Ke.height():this.Ke.width())/a;1>a&&(a=1);return this.Jd()?[1,a]:[a,1]},KT:function(a){return(this.yv(a)-this.Ne())/(this.vh()-this.Ne())},TE:function(){var a,c,d,e;this.hi?this.bj.toArray().forEach(function(c,d){var e=g(c);a=100*this.KT(d);this.gg()&&!this.Jd()&&(a=100-a);this.Jd()?g(e).css({top:100-a+"%"}):
g(e).css({left:a+"%"});g(e).attr("aria-valuenow",this.yv(d));this.Rca(a,d)},this):(c=this.Q8(),d=this.Ne(),e=this.vh(),a=e!==d?(c-d)/(e-d)*100:0,this.gg()&&!this.Jd()&&(a=100-a),this.Jd()?this.nt.css({top:100-a+"%"}):this.nt.css({left:a+"%"}),g(this.nt).attr("aria-valuenow",c),this.Oca(a))},Oca:function(a){var c=this.options.type;this.Jd()?("fromMin"===c&&this.Fc.css({height:a+"%"}),"fromMax"===c&&this.Fc.css({height:100-a+"%"})):this.gg()?("fromMin"===c&&this.Fc.css({width:100-a+"%"}),"fromMax"===
c&&this.Fc.css({width:a+"%"})):("fromMin"===c&&this.Fc.css({width:a+"%"}),"fromMax"===c&&this.Fc.css({width:100-a+"%"}))},Rca:function(a,c){var d=this.Fc.attr("id");if(0===c)switch(d=100*this.KT(1),this.options.type){case "fromMin":this.Jd()?this.Fc.css({height:a+"%"}):this.Fc.css({width:a+"%"});break;case "range":this.Jd()?(this.Fc.css({top:100-d+"%"}),this.Fc.css({height:d-a+"%"})):this.gg()?(this.Fc.css({left:100-d+"%"}),this.Fc.css({width:d-(100-a)+"%"})):(this.Fc.css({left:a+"%"}),this.Fc.css({width:d-
a+"%"}))}else{var e=100*this.KT(0);switch(this.options.type){case "fromMax":this.Jd()?this.Fc.css({height:100-a+"%"}):this.Fc.css({width:100-a+"%"});break;case "range":this.Jd()?document.getElementById(d)&&(this.Fc.css({top:100-a+"%"}),this.Fc.css({height:a-e+"%"})):this.gg()?document.getElementById(d)&&(this.Fc.css({left:a+"%"}),this.Fc.css({width:-a+100-e+"%"})):document.getElementById(d)&&this.Fc.css({width:a-parseInt(document.getElementById(d).style.left,10)+"%"})}}},vEa:{keydown:function(a){var c,
d,e,f=g(a.target).data("oj-slider-thumb-index");this.aj=f;switch(a.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:a.preventDefault(),g(a.target).addClass("oj-active")}e=this.options.step;c=this.hi?d=this.yv(f):d=this.x8();switch(a.keyCode){case g.ui.keyCode.HOME:d=this.Ne();break;case g.ui.keyCode.END:d=this.vh();break;case g.ui.keyCode.PAGE_UP:d=
this.Zk(c+(this.vh()-this.Ne())/this.xaa);break;case g.ui.keyCode.PAGE_DOWN:d=this.Zk(c-(this.vh()-this.Ne())/this.xaa);break;case g.ui.keyCode.UP:if(c===this.vh())return;d=this.Zk(c+e);break;case g.ui.keyCode.RIGHT:if(!this.gg()||this.Jd()){if(c===this.vh())return;c+=e}else{if(c===this.Ne())return;c-=e}d=this.Zk(c);break;case g.ui.keyCode.DOWN:if(c===this.Ne())return;d=this.Zk(c-e);break;case g.ui.keyCode.LEFT:if(!this.gg()||this.Jd()){if(c===this.Ne())return;c-=e}else{if(c===this.vh())return;c+=
e}d=this.Zk(c)}this.dp(a,f,d)},keyup:function(a){switch(a.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:var c=g(a.target).data("oj-slider-thumb-index");this.aj=c;this.Nk(a,c,!1);g(a.target).removeClass("oj-active");this.aj=null}}},Yf:function(b,c){var d=this.options,e=this;this._superApply(arguments);a.Ge.Ap([{ha:"disabled",Td:!0},{ha:"value"},{ha:"title"},
{ha:"min"},{ha:"max"},{ha:"step"}],c,this,function(a){for(var b=["value","step","min","max"],c=0;c<b.length;c++){var g=b[c],m=g in a?a[g]:d[g];null!=m&&("step"===g?a[g]=e.ZD(m):"min"===g||"max"===g?a[g]=e.Xo(g,m):"value"===g&&(Array.isArray(m)?a[g]=m:a[g]=e.Xo(g,m)))}});if(void 0===d.value)throw Error(this.F("noValue"));if(null!=d.min&&null!=d.max){if(d.max<d.min)throw Error(this.F("maxMin"));if(d.value<d.min||d.value>d.max)throw Error(this.F("valueRange"));}},getNodeBySubId:function(a){if(null==
a)return this.element?this.element[0]:null;a=a.subId;return"oj-slider-thumb-0"===a?this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===a?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===a||"oj-slider-bar-value"===a?this.widget().find("."+a)[0]:null},getSubIdByNode:function(a){if(null!=a){if(a.id===this.JT(0)&&g(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(a.id===this.JT(1)&&g(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(g(a).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};
if(g(a).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},Xo:function(a,c){var d;d=null!==c?+c:c;if(isNaN(d))throw Error(this.F("optionNum",{option:a}));return d},ZD:function(a){if(null===a)return 1;a=this.Xo("step",a);if(0>=a)throw Error(this.F("invalidStep"));if(null===a||0>=a)a=1;return a},jMa:function(){return this.Ke.offset().left+this.Ke.width()},sMa:function(){return this.Ke.offset().left},F4:function(a){var c=
this.C7(),d=a[0].style,e=this;a.draggable({axis:this.Jd()?"y":"x",grid:c,disabled:!1,start:function(c){a[0]===g(e.bj)[0]?e.aj=0:a[0]===g(e.bj)[1]&&(e.aj=1);e.iya(c,a)},drag:function(c,h){var k=h.position;e.Jd()?(d.left="",k.left=""):(d.top="",k.top="");e.Vza(c,a);e.Jd()?(0>k.top&&(k.top=0),k.top>e.Ke.height()&&(k.top=e.Ke.height())):(0>k.left&&(k.left=0),k.left>e.Ke.width()&&(k.left=e.Ke.width()));if(e.hi){var l;l=0===e.aj?g(e.bj[1]):g(e.bj[0]);if(e.Jd()){var m=a.outerHeight()/2,r=e.Ke.offsetParent().offset().top;
l=l.offset().top+m-r}else m=a.outerWidth()/2,r=e.Ke.offsetParent().offset().left,l=l.offset().left+m-r;0===e.aj?e.Jd()?k.top<l&&(k.top=l):e.gg()?k.left<l&&(k.left=l):k.left>l&&(k.left=l):e.Jd()?k.top>l&&(k.top=l):e.gg()?k.left>l&&(k.left=l):k.left<l&&(k.left=l)}},stop:function(c){this.style.width="";this.style.height="";e.QD(c,a)}})},pz:function(){this.options.disabled||(this.hi?this.bj.toArray().forEach(function(a){a=g(a);this.F4(a)},this):this.F4(this.nt))},dMa:function(){this.hi?this.bj.toArray().forEach(function(a){a=
g(a);a.is(".ui-draggable")&&a.draggable("disable")},this):this.nt.is(".ui-draggable")&&this.nt.draggable("disable")}})})();a.Components.Wa("ojSlider","editableValue",{properties:{disabled:{type:"boolean"},max:{type:"number"},min:{type:"number"},orientation:{type:"string"},rawValue:{type:"number|Array\x3cNumber\x3e",readOnly:!0,writeback:!0},step:{type:"number"},type:{type:"string"},value:{type:"number|Array\x3cNumber\x3e",writeback:!0}},methods:{},extension:{_hasWrapper:!0,_innerElement:"input",_widgetName:"ojSlider"}});
a.Components.register("oj-slider",a.Components.getMetadata("ojSlider"))});