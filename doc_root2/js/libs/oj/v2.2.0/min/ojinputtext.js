/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojeditablevalue"],function(a,g){a.Pa("oj.inputBase",g.oj.editableValue,{version:"1.0.0",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"",_WIDGET_CLASS_NAMES:"",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_GET_INIT_OPTIONS_PROPS:[{ha:"disabled",Td:!0},{ha:"pattern"},{ha:"placeholder"},{ha:"value"},{ha:"readonly",option:"readOnly",Td:!0},{ha:"required",xh:!0,Td:!0},{ha:"title"}],_INPUT_HELPER_KEY:"",k1:"blur",h2:"keydown",W1:"input",F1:"drop",options:{converter:void 0,
placeholder:void 0,rawValue:void 0,readOnly:!1},XB:function(a){var c=this._superApply(arguments);this.TAa();return c},Yf:function(b,c){this._super(b,c);a.Ge.Ap(this._GET_INIT_OPTIONS_PROPS,c,this)},_ComponentCreate:function(){var a=this._superApply(arguments),c=this.options.readOnly;this.Qg="rtl"===this.nd();"boolean"===typeof c&&this.element.prop("readonly",c);this.NB()?(this.nFa(),this.G1()&&this.NQ(),this._focusable({element:this.ck,applyHighlight:!0})):this._focusable({element:this.element,applyHighlight:!0});
this.hS={};this.$e=null;return a},Ph:function(){var a=this._superApply(arguments),c=this;this._CLASS_NAMES&&this.element.addClass(this._CLASS_NAMES);this.d4();this.wP();g.each(["disabled","readOnly"],function(a,b){c.options[b]&&c.Taa(b,c.options[b])});return a},Taa:function(a,c){"disabled"===a&&this.element.prop("disabled",c);"readOnly"===a&&(this.element.prop("readonly",c),this.TK("readOnly",c));"disabled"!==a&&"readOnly"!==a||this.d4()},_setOption:function(b,c){var d=this._superApply(arguments);
"disabled"!==b&&"readOnly"!==b||this.Taa(b,c);"pattern"===b&&(this.hS[a.Ve.VALIDATOR_TYPE_REGEXP]=this.J7(),this.Ox());return d},_destroy:function(){var b=this._superApply(arguments);this.element.off("blur drop keydown input");this.MU&&this.MU.remove();this.NB()&&(this.G1()?a.C.unwrap(this.element,this.ck):a.C.unwrap(this.element));return b},d4:function(){if(!this.options.readOnly&&!this.options.disabled){this.$e={};var a=g.proxy(this.vV,this),c=g.proxy(this.EK,this),d=g.proxy(this.nAa,this),e=function(){this.focus()};
this.element.on("blur",a);this.element.on("keydown",c);this.element.on("input",d);this.element.on("drop",e);this.$e[this.k1]=a;this.$e[this.h2]=c;this.$e[this.W1]=d;this.$e[this.F1]=e}else if(this.$e)for(a=[this.k1,this.h2,this.W1,this.F1],c=0,d=a.length;c<d;c++)this.$e[a[c]]&&(this.element.off(a[c],this.$e[a[c]]),delete this.$e[a[c]])},gs:{readOnly:"oj-read-only"},TAa:function(){for(var a=this._ATTR_CHECK,c=0,d=a.length;c<d;c++){var e=a[c].attr;"setMandatory"in a[c]&&this.element.attr(e,a[c].setMandatory)}},
vV:function(a){this.yc(this.Ri(),a)},EK:function(a){a.keyCode===g.ui.keyCode.ENTER&&this.yc(this.Ri(),a)},nAa:function(a){this.hq(this.Xf().val(),a)},NB:function(){return this._WIDGET_CLASS_NAMES},G1:function(){return this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES},nFa:function(){this.pe?(this.ck=g(this.pe).addClass(this._WIDGET_CLASS_NAMES),this.ck.append(this.element)):(g(this.element).wrap(g("\x3cdiv\x3e").addClass(this._WIDGET_CLASS_NAMES)),this.ck=this.element.parent())},NQ:function(){return g(this.element).wrap(g("\x3cdiv\x3e").addClass(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES)).parent()},
wP:function(){if(this._INPUT_HELPER_KEY&&this.NB()){var a=this.element.attr("aria-describedby")||"",c=this.Tm(this._INPUT_HELPER_KEY);this.element.attr("aria-describedby",a+(" "+c));this.MU=g("\x3cdiv class\x3d'oj-helper-hidden-accessible' id\x3d'"+c+"'\x3e"+this.Fj(this.F(this._INPUT_HELPER_KEY))+"\x3c/div\x3e");this.j1().append(this.MU)}},Fj:function(a){return g("\x3cspan\x3e"+a+"\x3c/span\x3e").text()},j1:function(){return this.widget()},PB:function(){var b=this._superApply(arguments);this.options.pattern&&
(this.hS[a.Ve.VALIDATOR_TYPE_REGEXP]=this.J7());return g.extend(this.hS,b)},TK:function(a,c){-1!=Object.keys(this.gs).indexOf(a)&&this.widget().toggleClass(this.gs[a],!!c)},J7:function(){if(!this.options.pattern)return null;var b={pattern:this.options.pattern,label:this.oT()};g.extend(b,this.options.translations.regexp||{});return a.Aa.rx(a.Ve.VALIDATOR_TYPE_REGEXP).createValidator(b)},Tm:function(a){return this.uuid+"_"+a},PLa:function(){return this.Qg},refresh:function(){var a=this._superApply(arguments);
this.Qg="rtl"===this.nd();return a},getNodeBySubId:function(a){return this._super(a)},widget:function(){return this.NB()?this.ck:this.element}},!0);a.Pa("oj.ojInputPassword",g.oj.inputBase,{version:"1.0.0",defaultElement:"\x3cinput\x3e",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"password"}],_CLASS_NAMES:"oj-inputpassword-input",_WIDGET_CLASS_NAMES:"oj-inputpassword oj-form-control oj-component",options:{pattern:""},getNodeBySubId:function(a){var c=this._superApply(arguments),d;
c||(d=a.subId,"oj-inputpassword-input"===d&&(c=this.element?this.element[0]:null));return c||null},_GetDefaultStyleClass:function(){return"oj-inputpassword"}});a.Pa("oj.ojTextArea",g.oj.inputBase,{version:"1.0.0",defaultElement:"\x3ctextarea\x3e",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"oj-textarea-input",_WIDGET_CLASS_NAMES:"oj-textarea oj-form-control oj-component",options:{pattern:""},getNodeBySubId:function(a){var c=this._superApply(arguments),d;c||(d=a.subId,"oj-textarea-input"===
d&&(c=this.element?this.element[0]:null));return c||null},_GetDefaultStyleClass:function(){return"oj-textarea"},gH:function(){return"oj-inputBase"}});a.Pa("oj.ojInputText",g.oj.inputBase,{version:"1.0.0",defaultElement:"\x3cinput\x3e",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_CLASS_NAMES:"oj-inputtext-input",_WIDGET_CLASS_NAMES:"oj-inputtext oj-form-control oj-component",options:{pattern:""},getNodeBySubId:function(a){var c=this._superApply(arguments),d;c||(d=a.subId,
"oj-inputtext-input"===d&&(c=this.element?this.element[0]:null));return c||null},_GetDefaultStyleClass:function(){return"oj-inputtext"},gH:function(){return"oj-inputBase"}});a.Components.Wa("inputBase","editableValue",{properties:{converter:{type:"Object"},placeholder:{type:"string"},rawValue:{type:"string",readOnly:!0,writeback:!0},readOnly:{type:"boolean"}},methods:{refresh:{},widget:{}},extension:{_hasWrapper:!0,_innerElement:"input",_widgetName:"inputBase"}});a.Components.Wa("ojInputPassword",
"inputBase",{properties:{pattern:{type:"string"},value:{type:"string",writeback:!0}},methods:{},extension:{_hasWrapper:!0,_innerElement:"input",_widgetName:"ojInputPassword"}});a.Components.register("oj-input-password",a.Components.getMetadata("ojInputPassword"));a.Components.Wa("ojInputText","inputBase",{properties:{pattern:{type:"string"},value:{type:"string",writeback:!0}},methods:{},extension:{_hasWrapper:!0,_innerElement:"input",_widgetName:"ojInputText"}});a.Components.register("oj-input-text",
a.Components.getMetadata("ojInputText"));a.Components.Wa("ojTextArea","inputBase",{properties:{pattern:{type:"string"},value:{type:"string",writeback:!0}},methods:{},extension:{_hasWrapper:!0,_innerElement:"textarea",_widgetName:"ojTextArea"}});a.Components.register("oj-text-area",a.Components.getMetadata("ojTextArea"))});